{% extends "base.html" %}
{% block title %}Add New Recipe{% endblock %}
{% block content %}

<h1 class="center-align">Add Recipe</h1>
<div class="row card-panel grey lighten-5">
  <form
    class="col s12"
    method="POST"
    action="{{ url_for('routes.add_recipe') }}"
    enctype="multipart/form-data"
    id="addRecipe">
    <!-- Recipe Name Field -->
    <div class="row">
      <div class="input-field col s12">
        <input
          id="recipe_name"
          name="recipe_name"
          minlength="5"
          maxlength="55"
          type="text"
          class="validate"
          required >
        <label for="recipe_name">Recipe Name (required)</label>
      </div>
    </div>

    <!-- Recipe Description Field and Tags -->
    <div class="row">
      <div class="input-field custom-textarea-field col s12">
        <textarea id="recipe_desc" class="custom-textarea" name="recipe_desc" placeholder="Recipe Description (required)" rows="4" required></textarea>
        <label for="recipe_desc">Recipe Description (required)</label>
      </div>

      <!-- Tags field -->
      <div class="input-field col s12">
        <input
          type="text"
          id="tags_input"
          name="tags"
          data-url="{{ url_for('routes.autocomplete_tags') }}" 
          class="validate"
          placeholder="Searchable Tags (Optional, comma separated)"
        >          
        <label for="tags_input">Searchable Tags (Optional, comma separated)</label>
      </div>
    </div>

    <!-- Initial Stage for Instructions and Images -->
    <div class="row multi-stage">
      <!-- Instructions Textarea -->
      <h6 class="center-align recipe-title">Recipe Stage 1</h6>
      <div class="input-field custom-textarea-field col s12 m7">
        <textarea id="instructions_1" class="custom-textarea" name="instructions[]" placeholder="Stage 1 Instructions (required)" rows="4" required></textarea>
        <label for="instructions_1">Stage 1 Instructions (required)</label>
      </div>
      <!-- Image Upload Handling -->
      <div class="col s12 m5">
        <div class="file-field input-field">
          <div class="row center-align">
            <div class="col s12 l6">
              <div class="btn teal darken-2">
                <span>Add Image</span>
                <input type="file" name="images[]" accept="image/*" >
              </div>
            </div> 
            <div class="col s12 l6">
              <div class="file-path-wrapper">
                <input
                  class="file-path validate"
                  type="text"
                  placeholder="Stage 1 image" >
              </div>
            </div>
          </div>
          <!-- Alt Text Field -->
          <div class="input-field">
            <input
              id="image_desc_1"
              name="image_desc[]"
              type="text"
              class="validate">
            <label for="image_desc_1">Image Description (Optional)</label>
          </div>
        </div> 
      </div>
    </div>

    <!-- Buttons to Add/Remove Stages -->
    <div class="row">
      <div class="col s12 center-align stage-buttons">
        <button type="button" class="add_field btn teal darken-2">Add Stage</button>
        <div class="tooltip-container">
          <button
            type="button"
            class="remove_field btn teal darken-2 disabled"
            disabled>
            Remove Stage
          </button>
        </div>
      </div>
    </div>

    <!-- Submit Button -->
    <div class="row">
      <div class="col s12 center-align">
        <button
          type="submit"
          class="btn-small light-blue darken-4"
          id="submitButton">
          Add Recipe
        </button>
      </div>
    </div>
  </form>
</div>

{% endblock %}
